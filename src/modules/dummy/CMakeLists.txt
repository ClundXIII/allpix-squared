########################
# Allpix2 Dummy Module #
########################

INCLUDE_DIRECTORIES(${dir})
FILE(GLOB_RECURSE LIB_SOURCE_FILES "${dir}/*.cpp")
MESSAGE( STATUS " -- sources: ${LIB_SOURCE_FILES}")

# FIXME: determine per module if we want to include ROOT + G4
INCLUDE_DIRECTORIES(SYSTEM ${ROOT_INCLUDE_DIRS})
INCLUDE(${Geant4_USE_FILE})

# WARNING: RESET THE CXX CMAKE_CXX_FLAGS WITH GEANT4 OPTIONS
SET(CMAKE_CXX_FLAGS "${SAVE_CXX_FLAGS} -DG4USE_STD11")

# ADD DEFINITIONS FOR EXPERIMENTAL EIGEN CONVERSIONS
# ADD_DEFINITIONS(-DHAVE_ROOT -DHAVE_GEANT)

ADD_LIBRARY(${dir} SHARED ${LIB_SOURCE_FILES})

TARGET_LINK_LIBRARIES(${dir} AllpixCore)
TARGET_LINK_LIBRARIES(${dir} AllpixMessages)

# FIXME: determine per module the libraries to link
TARGET_LINK_LIBRARIES(${dir} ${ROOT_LIBRARIES} ${ROOT_COMPONENT_LIBRARIES} ${Geant4_LIBRARIES})

INSTALL(TARGETS ${dir}
  RUNTIME DESTINATION bin
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib)
